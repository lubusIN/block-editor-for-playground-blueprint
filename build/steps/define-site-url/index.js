(()=>{"use strict";const e=window.wp.blocks,n=window.wp.primitives,t=window.ReactJSXRuntime,i=(0,t.jsx)(n.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,t.jsx)(n.Path,{d:"M12 3.3c-4.8 0-8.8 3.9-8.8 8.8 0 4.8 3.9 8.8 8.8 8.8 4.8 0 8.8-3.9 8.8-8.8s-4-8.8-8.8-8.8zm6.5 5.5h-2.6C15.4 7.3 14.8 6 14 5c2 .6 3.6 2 4.5 3.8zm.7 3.2c0 .6-.1 1.2-.2 1.8h-2.9c.1-.6.1-1.2.1-1.8s-.1-1.2-.1-1.8H19c.2.6.2 1.2.2 1.8zM12 18.7c-1-.7-1.8-1.9-2.3-3.5h4.6c-.5 1.6-1.3 2.9-2.3 3.5zm-2.6-4.9c-.1-.6-.1-1.1-.1-1.8 0-.6.1-1.2.1-1.8h5.2c.1.6.1 1.1.1 1.8s-.1 1.2-.1 1.8H9.4zM4.8 12c0-.6.1-1.2.2-1.8h2.9c-.1.6-.1 1.2-.1 1.8 0 .6.1 1.2.1 1.8H5c-.2-.6-.2-1.2-.2-1.8zM12 5.3c1 .7 1.8 1.9 2.3 3.5H9.7c.5-1.6 1.3-2.9 2.3-3.5zM10 5c-.8 1-1.4 2.3-1.8 3.8H5.5C6.4 7 8 5.6 10 5zM5.5 15.3h2.6c.4 1.5 1 2.8 1.8 3.7-1.8-.6-3.5-2-4.4-3.7zM14 19c.8-1 1.4-2.2 1.8-3.7h2.6C17.6 17 16 18.4 14 19z"})}),l=JSON.parse('{"UU":"playground-step/define-site-url","DD":"Define Site Url"}'),a=window.wp.i18n,o=window.wp.blockEditor,s=window.wp.components,r=window.wp.element,d=(0,r.createContext)({fields:[]});function c({fields:e,children:n}){return(0,t.jsx)(d.Provider,{value:{fields:e},children:n})}const u=d,m={sort:function(e,n,t){return"asc"===t?e-n:n-e},isValid:function(e,n){if(""===e)return!1;if(!Number.isInteger(Number(e)))return!1;if(n?.elements){const t=n?.elements.map((e=>e.value));if(!t.includes(Number(e)))return!1}return!0},Edit:"integer"},f={sort:function(e,n,t){return"asc"===t?e.localeCompare(n):n.localeCompare(e)},isValid:function(e,n){if(n?.elements){const t=n?.elements?.map((e=>e.value));if(!t.includes(e))return!1}return!0},Edit:"text"},p={sort:function(e,n,t){const i=new Date(e).getTime(),l=new Date(n).getTime();return"asc"===t?i-l:l-i},isValid:function(e,n){if(n?.elements){const t=n?.elements.map((e=>e.value));if(!t.includes(e))return!1}return!0},Edit:"datetime"},h={datetime:function({data:e,field:n,onChange:i,hideLabelFromVision:l}){const{id:a,label:o}=n,d=n.getValue({item:e}),c=(0,r.useCallback)((e=>i({[a]:e})),[a,i]);return(0,t.jsxs)("fieldset",{className:"dataviews-controls__datetime",children:[!l&&(0,t.jsx)(s.BaseControl.VisualLabel,{as:"legend",children:o}),l&&(0,t.jsx)(s.VisuallyHidden,{as:"legend",children:o}),(0,t.jsx)(s.TimePicker,{currentTime:d,onChange:c,hideLabelFromVision:!0})]})},integer:function({data:e,field:n,onChange:i,hideLabelFromVision:l}){var a;const{id:o,label:d,description:c}=n,u=null!==(a=n.getValue({item:e}))&&void 0!==a?a:"",m=(0,r.useCallback)((e=>i({[o]:Number(e)})),[o,i]);return(0,t.jsx)(s.__experimentalNumberControl,{label:d,help:c,value:u,onChange:m,__next40pxDefaultSize:!0,hideLabelFromVision:l})},radio:function({data:e,field:n,onChange:i,hideLabelFromVision:l}){const{id:a,label:o}=n,d=n.getValue({item:e}),c=(0,r.useCallback)((e=>i({[a]:e})),[a,i]);return n.elements?(0,t.jsx)(s.RadioControl,{label:o,onChange:c,options:n.elements,selected:d,hideLabelFromVision:l}):null},select:function({data:e,field:n,onChange:i,hideLabelFromVision:l}){var o,d;const{id:c,label:u}=n,m=null!==(o=n.getValue({item:e}))&&void 0!==o?o:"",f=(0,r.useCallback)((e=>i({[c]:e})),[c,i]),p=[{label:(0,a.__)("Select item"),value:""},...null!==(d=n?.elements)&&void 0!==d?d:[]];return(0,t.jsx)(s.SelectControl,{label:u,value:m,options:p,onChange:f,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,hideLabelFromVision:l})},text:function({data:e,field:n,onChange:i,hideLabelFromVision:l}){const{id:a,label:o,placeholder:d}=n,c=n.getValue({item:e}),u=(0,r.useCallback)((e=>i({[a]:e})),[a,i]);return(0,t.jsx)(s.TextControl,{label:o,placeholder:d,value:null!=c?c:"",onChange:u,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,hideLabelFromVision:l})}};function x(e){if(Object.keys(h).includes(e))return h[e];throw"Control "+e+" not found"}const g=e=>({item:n})=>{const t=e.split(".");let i=n;for(const e of t)i=i.hasOwnProperty(e)?i[e]:void 0;return i};function _(e){return void 0!==e.children}function b({title:e}){return(0,t.jsx)(s.__experimentalVStack,{className:"dataforms-layouts-regular__header",spacing:4,children:(0,t.jsxs)(s.__experimentalHStack,{alignment:"center",children:[(0,t.jsx)(s.__experimentalHeading,{level:2,size:13,children:e}),(0,t.jsx)(s.__experimentalSpacer,{})]})})}const j=(0,t.jsx)(n.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,t.jsx)(n.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})});function v({title:e,onClose:n}){return(0,t.jsx)(s.__experimentalVStack,{className:"dataforms-layouts-panel__dropdown-header",spacing:4,children:(0,t.jsxs)(s.__experimentalHStack,{alignment:"center",children:[e&&(0,t.jsx)(s.__experimentalHeading,{level:2,size:13,children:e}),(0,t.jsx)(s.__experimentalSpacer,{}),n&&(0,t.jsx)(s.Button,{label:(0,a.__)("Close"),icon:j,onClick:n,size:"small"})]})})}function C({fieldDefinition:e,popoverAnchor:n,labelPosition:i="side",data:l,onChange:o,field:d}){const c=_(d)?d.label:e?.label,u=(0,r.useMemo)((()=>_(d)?{type:"regular",fields:d.children.map((e=>"string"==typeof e?{id:e}:e))}:{type:"regular",fields:[{id:d.id}]}),[d]),m=(0,r.useMemo)((()=>({anchor:n,placement:"left-start",offset:36,shift:!0})),[n]);return(0,t.jsx)(s.Dropdown,{contentClassName:"dataforms-layouts-panel__field-dropdown",popoverProps:m,focusOnMount:!0,toggleProps:{size:"compact",variant:"tertiary",tooltipPosition:"middle left"},renderToggle:({isOpen:n,onToggle:o})=>(0,t.jsx)(s.Button,{className:"dataforms-layouts-panel__field-control",size:"compact",variant:["none","top"].includes(i)?"link":"tertiary","aria-expanded":n,"aria-label":(0,a.sprintf)(
// translators: %s: Field name.
// translators: %s: Field name.
(0,a._x)("Edit %s","field"),c),onClick:o,children:(0,t.jsx)(e.render,{item:l})}),renderContent:({onClose:e})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v,{title:c,onClose:e}),(0,t.jsx)(w,{data:l,form:u,onChange:o,children:(e,n)=>{var i;return(0,t.jsx)(e,{data:l,field:n,onChange:o,hideLabelFromVision:(null!==(i=u?.fields)&&void 0!==i?i:[]).length<2},n.id)}})]})})}const y=[{type:"regular",component:function({data:e,field:n,onChange:i,hideLabelFromVision:l}){var a;const{fields:o}=(0,r.useContext)(u),d=(0,r.useMemo)((()=>_(n)?{fields:n.children.map((e=>"string"==typeof e?{id:e}:e)),type:"regular"}:{type:"regular",fields:[]}),[n]);if(_(n))return(0,t.jsxs)(t.Fragment,{children:[!l&&n.label&&(0,t.jsx)(b,{title:n.label}),(0,t.jsx)(w,{data:e,form:d,onChange:i})]});const c=null!==(a=n.labelPosition)&&void 0!==a?a:"top",m=o.find((e=>e.id===n.id));return m?"side"===c?(0,t.jsxs)(s.__experimentalHStack,{className:"dataforms-layouts-regular__field",children:[(0,t.jsx)("div",{className:"dataforms-layouts-regular__field-label",children:m.label}),(0,t.jsx)("div",{className:"dataforms-layouts-regular__field-control",children:(0,t.jsx)(m.Edit,{data:e,field:m,onChange:i,hideLabelFromVision:!0},m.id)})]}):(0,t.jsx)("div",{className:"dataforms-layouts-regular__field",children:(0,t.jsx)(m.Edit,{data:e,field:m,onChange:i,hideLabelFromVision:"none"===c||l})}):null}},{type:"panel",component:function({data:e,field:n,onChange:i}){var l;const{fields:a}=(0,r.useContext)(u),o=a.find((e=>{if(_(n)){const t=n.children.filter((e=>"string"==typeof e||!_(e))),i="string"==typeof t[0]?t[0]:t[0].id;return e.id===i}return e.id===n.id})),d=null!==(l=n.labelPosition)&&void 0!==l?l:"side",[c,m]=(0,r.useState)(null);if(!o)return null;const f=_(n)?n.label:o?.label;return"top"===d?(0,t.jsxs)(s.__experimentalVStack,{className:"dataforms-layouts-panel__field",spacing:0,children:[(0,t.jsx)("div",{className:"dataforms-layouts-panel__field-label",style:{paddingBottom:0},children:f}),(0,t.jsx)("div",{className:"dataforms-layouts-panel__field-control",children:(0,t.jsx)(C,{field:n,popoverAnchor:c,fieldDefinition:o,data:e,onChange:i,labelPosition:d})})]}):"none"===d?(0,t.jsx)("div",{className:"dataforms-layouts-panel__field",children:(0,t.jsx)(C,{field:n,popoverAnchor:c,fieldDefinition:o,data:e,onChange:i,labelPosition:d})}):(0,t.jsxs)(s.__experimentalHStack,{ref:m,className:"dataforms-layouts-panel__field",children:[(0,t.jsx)("div",{className:"dataforms-layouts-panel__field-label",children:f}),(0,t.jsx)("div",{className:"dataforms-layouts-panel__field-control",children:(0,t.jsx)(C,{field:n,popoverAnchor:c,fieldDefinition:o,data:e,onChange:i,labelPosition:d})})]})}}];function w({data:e,form:n,onChange:i,children:l}){const{fields:a}=(0,r.useContext)(u),o=(0,r.useMemo)((()=>function(e){var n,t,i;let l="regular";["regular","panel"].includes(null!==(n=e.type)&&void 0!==n?n:"")&&(l=e.type);const a=null!==(t=e.labelPosition)&&void 0!==t?t:"regular"===l?"top":"side";return(null!==(i=e.fields)&&void 0!==i?i:[]).map((e=>{var n,t;if("string"==typeof e)return{id:e,layout:l,labelPosition:a};const i=null!==(n=e.layout)&&void 0!==n?n:l,o=null!==(t=e.labelPosition)&&void 0!==t?t:"regular"===i?"top":"side";return{...e,layout:i,labelPosition:o}}))}(n)),[n]);return(0,t.jsx)(s.__experimentalVStack,{spacing:2,children:o.map((n=>{const o=(s=n.layout,y.find((e=>e.type===s)))?.component;var s;if(!o)return null;const r=_(n)?void 0:function(e){const n="string"==typeof e?e:e.id;return a.find((e=>e.id===n))}(n);return r&&r.isVisible&&!r.isVisible(e)?null:l?l(o,n):(0,t.jsx)(o,{data:e,field:n,onChange:i},n.id)}))})}function V({data:e,form:n,fields:i,onChange:l}){const a=(0,r.useMemo)((()=>function(e){return e.map((e=>{var n,t,i,l;const a="integer"===(o=e.type)?m:"text"===o?f:"datetime"===o?p:{sort:(e,n,t)=>"number"==typeof e&&"number"==typeof n?"asc"===t?e-n:n-e:"asc"===t?e.localeCompare(n):n.localeCompare(e),isValid:(e,n)=>{if(n?.elements){const t=n?.elements?.map((e=>e.value));if(!t.includes(e))return!1}return!0},Edit:()=>null};var o;const s=e.getValue||g(e.id),r=null!==(n=e.sort)&&void 0!==n?n:function(e,n,t){return a.sort(s({item:e}),s({item:n}),t)},d=null!==(t=e.isValid)&&void 0!==t?t:function(e,n){return a.isValid(s({item:e}),n)},c=function(e,n){return"function"==typeof e.Edit?e.Edit:"string"==typeof e.Edit?x(e.Edit):e.elements?x("select"):"string"==typeof n.Edit?x(n.Edit):n.Edit}(e,a),u=e.render||(e.elements?({item:n})=>{const t=s({item:n});return e?.elements?.find((e=>e.value===t))?.label||s({item:n})}:s);return{...e,label:e.label||e.id,header:e.header||e.label||e.id,getValue:s,render:u,sort:r,isValid:d,Edit:c,enableHiding:null===(i=e.enableHiding)||void 0===i||i,enableSorting:null===(l=e.enableSorting)||void 0===l||l}}))}(i)),[i]);return n.fields?(0,t.jsx)(c,{fields:a,children:(0,t.jsx)(w,{data:e,form:n,onChange:l})}):null}(0,e.registerBlockType)(l.UU,{icon:i,edit:function({attributes:e,setAttributes:n,isSelected:a}){const{siteUrl:r}=e;return(0,t.jsx)("p",{...(0,o.useBlockProps)(),children:(0,t.jsx)(s.Placeholder,{preview:(0,t.jsxs)(s.__experimentalVStack,{style:{width:"100%"},children:[(0,t.jsxs)(s.__experimentalHStack,{justify:"left",align:"center",spacing:3,children:[(0,t.jsx)(s.Icon,{icon:i,size:28,className:"step-icon"}),(0,t.jsxs)(s.__experimentalVStack,{spacing:1,children:[(0,t.jsx)(s.__experimentalText,{upperCase:!0,size:12,weight:500,color:"#949494",children:l.DD}),!a&&(0,t.jsx)(s.__experimentalText,{weight:600,children:`${r||"Site Url"}`})]})]}),a&&(0,t.jsx)(V,{data:e,fields:[{id:"siteUrl",label:"Site Url",type:"text",placeholder:"e.g., https://example.com"}],form:{fields:["siteUrl"]},onChange:n})]})})})}})})();
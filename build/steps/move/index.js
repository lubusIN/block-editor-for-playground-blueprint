(()=>{"use strict";const e=window.wp.blocks,t=window.wp.primitives,n=window.ReactJSXRuntime,l=(0,n.jsx)(t.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,n.jsx)(t.Path,{d:"M19.75 9c0-1.257-.565-2.197-1.39-2.858-.797-.64-1.827-1.017-2.815-1.247-1.802-.42-3.703-.403-4.383-.396L11 4.5V6l.177-.001c.696-.006 2.416-.02 4.028.356.887.207 1.67.518 2.216.957.52.416.829.945.829 1.688 0 .592-.167.966-.407 1.23-.255.281-.656.508-1.236.674-1.19.34-2.82.346-4.607.346h-.077c-1.692 0-3.527 0-4.942.404-.732.209-1.424.545-1.935 1.108-.526.579-.796 1.33-.796 2.238 0 1.257.565 2.197 1.39 2.858.797.64 1.827 1.017 2.815 1.247 1.802.42 3.703.403 4.383.396L13 19.5h.714V22L18 18.5 13.714 15v3H13l-.177.001c-.696.006-2.416.02-4.028-.356-.887-.207-1.67-.518-2.216-.957-.52-.416-.829-.945-.829-1.688 0-.592.167-.966.407-1.23.255-.281.656-.508 1.237-.674 1.189-.34 2.819-.346 4.606-.346h.077c1.692 0 3.527 0 4.941-.404.732-.209 1.425-.545 1.936-1.108.526-.579.796-1.33.796-2.238z"})}),i=JSON.parse('{"UU":"playground-step/move","DD":"Move File/Dir"}'),a=window.wp.i18n,o=window.wp.blockEditor,r=window.wp.components,s=window.wp.element,d=(0,s.createContext)({fields:[]});function c({fields:e,children:t}){return(0,n.jsx)(d.Provider,{value:{fields:e},children:t})}const u=d,f={sort:function(e,t,n){return"asc"===n?e-t:t-e},isValid:function(e,t){if(""===e)return!1;if(!Number.isInteger(Number(e)))return!1;if(t?.elements){const n=t?.elements.map((e=>e.value));if(!n.includes(Number(e)))return!1}return!0},Edit:"integer"},m={sort:function(e,t,n){return"asc"===n?e.localeCompare(t):t.localeCompare(e)},isValid:function(e,t){if(t?.elements){const n=t?.elements?.map((e=>e.value));if(!n.includes(e))return!1}return!0},Edit:"text"},p={sort:function(e,t,n){const l=new Date(e).getTime(),i=new Date(t).getTime();return"asc"===n?l-i:i-l},isValid:function(e,t){if(t?.elements){const n=t?.elements.map((e=>e.value));if(!n.includes(e))return!1}return!0},Edit:"datetime"},h={datetime:function({data:e,field:t,onChange:l,hideLabelFromVision:i}){const{id:a,label:o}=t,d=t.getValue({item:e}),c=(0,s.useCallback)((e=>l({[a]:e})),[a,l]);return(0,n.jsxs)("fieldset",{className:"dataviews-controls__datetime",children:[!i&&(0,n.jsx)(r.BaseControl.VisualLabel,{as:"legend",children:o}),i&&(0,n.jsx)(r.VisuallyHidden,{as:"legend",children:o}),(0,n.jsx)(r.TimePicker,{currentTime:d,onChange:c,hideLabelFromVision:!0})]})},integer:function({data:e,field:t,onChange:l,hideLabelFromVision:i}){var a;const{id:o,label:d,description:c}=t,u=null!==(a=t.getValue({item:e}))&&void 0!==a?a:"",f=(0,s.useCallback)((e=>l({[o]:Number(e)})),[o,l]);return(0,n.jsx)(r.__experimentalNumberControl,{label:d,help:c,value:u,onChange:f,__next40pxDefaultSize:!0,hideLabelFromVision:i})},radio:function({data:e,field:t,onChange:l,hideLabelFromVision:i}){const{id:a,label:o}=t,d=t.getValue({item:e}),c=(0,s.useCallback)((e=>l({[a]:e})),[a,l]);return t.elements?(0,n.jsx)(r.RadioControl,{label:o,onChange:c,options:t.elements,selected:d,hideLabelFromVision:i}):null},select:function({data:e,field:t,onChange:l,hideLabelFromVision:i}){var o,d;const{id:c,label:u}=t,f=null!==(o=t.getValue({item:e}))&&void 0!==o?o:"",m=(0,s.useCallback)((e=>l({[c]:e})),[c,l]),p=[{label:(0,a.__)("Select item"),value:""},...null!==(d=t?.elements)&&void 0!==d?d:[]];return(0,n.jsx)(r.SelectControl,{label:u,value:f,options:p,onChange:m,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,hideLabelFromVision:i})},text:function({data:e,field:t,onChange:l,hideLabelFromVision:i}){const{id:a,label:o,placeholder:d}=t,c=t.getValue({item:e}),u=(0,s.useCallback)((e=>l({[a]:e})),[a,l]);return(0,n.jsx)(r.TextControl,{label:o,placeholder:d,value:null!=c?c:"",onChange:u,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,hideLabelFromVision:i})}};function x(e){if(Object.keys(h).includes(e))return h[e];throw"Control "+e+" not found"}const g=e=>({item:t})=>{const n=e.split(".");let l=t;for(const e of n)l=l.hasOwnProperty(e)?l[e]:void 0;return l};function _(e){return void 0!==e.children}function b({title:e}){return(0,n.jsx)(r.__experimentalVStack,{className:"dataforms-layouts-regular__header",spacing:4,children:(0,n.jsxs)(r.__experimentalHStack,{alignment:"center",children:[(0,n.jsx)(r.__experimentalHeading,{level:2,size:13,children:e}),(0,n.jsx)(r.__experimentalSpacer,{})]})})}const v=(0,n.jsx)(t.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,n.jsx)(t.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})});function j({title:e,onClose:t}){return(0,n.jsx)(r.__experimentalVStack,{className:"dataforms-layouts-panel__dropdown-header",spacing:4,children:(0,n.jsxs)(r.__experimentalHStack,{alignment:"center",children:[e&&(0,n.jsx)(r.__experimentalHeading,{level:2,size:13,children:e}),(0,n.jsx)(r.__experimentalSpacer,{}),t&&(0,n.jsx)(r.Button,{label:(0,a.__)("Close"),icon:v,onClick:t,size:"small"})]})})}function y({fieldDefinition:e,popoverAnchor:t,labelPosition:l="side",data:i,onChange:o,field:d}){const c=_(d)?d.label:e?.label,u=(0,s.useMemo)((()=>_(d)?{type:"regular",fields:d.children.map((e=>"string"==typeof e?{id:e}:e))}:{type:"regular",fields:[{id:d.id}]}),[d]),f=(0,s.useMemo)((()=>({anchor:t,placement:"left-start",offset:36,shift:!0})),[t]);return(0,n.jsx)(r.Dropdown,{contentClassName:"dataforms-layouts-panel__field-dropdown",popoverProps:f,focusOnMount:!0,toggleProps:{size:"compact",variant:"tertiary",tooltipPosition:"middle left"},renderToggle:({isOpen:t,onToggle:o})=>(0,n.jsx)(r.Button,{className:"dataforms-layouts-panel__field-control",size:"compact",variant:["none","top"].includes(l)?"link":"tertiary","aria-expanded":t,"aria-label":(0,a.sprintf)(
// translators: %s: Field name.
// translators: %s: Field name.
(0,a._x)("Edit %s","field"),c),onClick:o,children:(0,n.jsx)(e.render,{item:i})}),renderContent:({onClose:e})=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(j,{title:c,onClose:e}),(0,n.jsx)(w,{data:i,form:u,onChange:o,children:(e,t)=>{var l;return(0,n.jsx)(e,{data:i,field:t,onChange:o,hideLabelFromVision:(null!==(l=u?.fields)&&void 0!==l?l:[]).length<2},t.id)}})]})})}const C=[{type:"regular",component:function({data:e,field:t,onChange:l,hideLabelFromVision:i}){var a;const{fields:o}=(0,s.useContext)(u),d=(0,s.useMemo)((()=>_(t)?{fields:t.children.map((e=>"string"==typeof e?{id:e}:e)),type:"regular"}:{type:"regular",fields:[]}),[t]);if(_(t))return(0,n.jsxs)(n.Fragment,{children:[!i&&t.label&&(0,n.jsx)(b,{title:t.label}),(0,n.jsx)(w,{data:e,form:d,onChange:l})]});const c=null!==(a=t.labelPosition)&&void 0!==a?a:"top",f=o.find((e=>e.id===t.id));return f?"side"===c?(0,n.jsxs)(r.__experimentalHStack,{className:"dataforms-layouts-regular__field",children:[(0,n.jsx)("div",{className:"dataforms-layouts-regular__field-label",children:f.label}),(0,n.jsx)("div",{className:"dataforms-layouts-regular__field-control",children:(0,n.jsx)(f.Edit,{data:e,field:f,onChange:l,hideLabelFromVision:!0},f.id)})]}):(0,n.jsx)("div",{className:"dataforms-layouts-regular__field",children:(0,n.jsx)(f.Edit,{data:e,field:f,onChange:l,hideLabelFromVision:"none"===c||i})}):null}},{type:"panel",component:function({data:e,field:t,onChange:l}){var i;const{fields:a}=(0,s.useContext)(u),o=a.find((e=>{if(_(t)){const n=t.children.filter((e=>"string"==typeof e||!_(e))),l="string"==typeof n[0]?n[0]:n[0].id;return e.id===l}return e.id===t.id})),d=null!==(i=t.labelPosition)&&void 0!==i?i:"side",[c,f]=(0,s.useState)(null);if(!o)return null;const m=_(t)?t.label:o?.label;return"top"===d?(0,n.jsxs)(r.__experimentalVStack,{className:"dataforms-layouts-panel__field",spacing:0,children:[(0,n.jsx)("div",{className:"dataforms-layouts-panel__field-label",style:{paddingBottom:0},children:m}),(0,n.jsx)("div",{className:"dataforms-layouts-panel__field-control",children:(0,n.jsx)(y,{field:t,popoverAnchor:c,fieldDefinition:o,data:e,onChange:l,labelPosition:d})})]}):"none"===d?(0,n.jsx)("div",{className:"dataforms-layouts-panel__field",children:(0,n.jsx)(y,{field:t,popoverAnchor:c,fieldDefinition:o,data:e,onChange:l,labelPosition:d})}):(0,n.jsxs)(r.__experimentalHStack,{ref:f,className:"dataforms-layouts-panel__field",children:[(0,n.jsx)("div",{className:"dataforms-layouts-panel__field-label",children:m}),(0,n.jsx)("div",{className:"dataforms-layouts-panel__field-control",children:(0,n.jsx)(y,{field:t,popoverAnchor:c,fieldDefinition:o,data:e,onChange:l,labelPosition:d})})]})}}];function w({data:e,form:t,onChange:l,children:i}){const{fields:a}=(0,s.useContext)(u),o=(0,s.useMemo)((()=>function(e){var t,n,l;let i="regular";["regular","panel"].includes(null!==(t=e.type)&&void 0!==t?t:"")&&(i=e.type);const a=null!==(n=e.labelPosition)&&void 0!==n?n:"regular"===i?"top":"side";return(null!==(l=e.fields)&&void 0!==l?l:[]).map((e=>{var t,n;if("string"==typeof e)return{id:e,layout:i,labelPosition:a};const l=null!==(t=e.layout)&&void 0!==t?t:i,o=null!==(n=e.labelPosition)&&void 0!==n?n:"regular"===l?"top":"side";return{...e,layout:l,labelPosition:o}}))}(t)),[t]);return(0,n.jsx)(r.__experimentalVStack,{spacing:2,children:o.map((t=>{const o=(r=t.layout,C.find((e=>e.type===r)))?.component;var r;if(!o)return null;const s=_(t)?void 0:function(e){const t="string"==typeof e?e:e.id;return a.find((e=>e.id===t))}(t);return s&&s.isVisible&&!s.isVisible(e)?null:i?i(o,t):(0,n.jsx)(o,{data:e,field:t,onChange:l},t.id)}))})}function V({data:e,form:t,fields:l,onChange:i}){const a=(0,s.useMemo)((()=>function(e){return e.map((e=>{var t,n,l,i;const a="integer"===(o=e.type)?f:"text"===o?m:"datetime"===o?p:{sort:(e,t,n)=>"number"==typeof e&&"number"==typeof t?"asc"===n?e-t:t-e:"asc"===n?e.localeCompare(t):t.localeCompare(e),isValid:(e,t)=>{if(t?.elements){const n=t?.elements?.map((e=>e.value));if(!n.includes(e))return!1}return!0},Edit:()=>null};var o;const r=e.getValue||g(e.id),s=null!==(t=e.sort)&&void 0!==t?t:function(e,t,n){return a.sort(r({item:e}),r({item:t}),n)},d=null!==(n=e.isValid)&&void 0!==n?n:function(e,t){return a.isValid(r({item:e}),t)},c=function(e,t){return"function"==typeof e.Edit?e.Edit:"string"==typeof e.Edit?x(e.Edit):e.elements?x("select"):"string"==typeof t.Edit?x(t.Edit):t.Edit}(e,a),u=e.render||(e.elements?({item:t})=>{const n=r({item:t});return e?.elements?.find((e=>e.value===n))?.label||r({item:t})}:r);return{...e,label:e.label||e.id,header:e.header||e.label||e.id,getValue:r,render:u,sort:s,isValid:d,Edit:c,enableHiding:null===(l=e.enableHiding)||void 0===l||l,enableSorting:null===(i=e.enableSorting)||void 0===i||i}}))}(l)),[l]);return t.fields?(0,n.jsx)(c,{fields:a,children:(0,n.jsx)(w,{data:e,form:t,onChange:i})}):null}(0,e.registerBlockType)(i.UU,{icon:l,edit:function({attributes:e,setAttributes:t,isSelected:a}){const{fromPath:s,toPath:d}=e;return(0,n.jsx)("p",{...(0,o.useBlockProps)(),children:(0,n.jsx)(r.Placeholder,{preview:(0,n.jsxs)(r.__experimentalVStack,{style:{width:"100%"},children:[(0,n.jsxs)(r.__experimentalHStack,{justify:"left",align:"center",spacing:3,children:[(0,n.jsx)(r.Icon,{icon:l,size:28,className:"step-icon"}),(0,n.jsxs)(r.__experimentalVStack,{spacing:1,children:[(0,n.jsx)(r.__experimentalText,{upperCase:!0,size:12,weight:500,color:"#949494",children:i.DD}),!a&&(0,n.jsx)(r.__experimentalText,{weight:600,children:`from ${s||"{from path}"} to ${d||"{to path}"}`})]})]}),a&&(0,n.jsx)(V,{data:e,fields:[{id:"fromPath",label:"From Path",type:"text",placeholder:"Enter the current path of the file or directory"},{id:"toPath",label:"To Path",type:"text",placeholder:"Enter the new path where the file or directory should be moved"}],form:{fields:["fromPath","toPath"]},onChange:t})]})})})}})})();
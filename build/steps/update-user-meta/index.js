(()=>{"use strict";const e=window.wp.blocks,t=window.wp.primitives,n=window.ReactJSXRuntime,l=(0,n.jsx)(t.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)(t.Path,{d:"M10 4.5a1 1 0 11-2 0 1 1 0 012 0zm1.5 0a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0zm2.25 7.5v-1A2.75 2.75 0 0011 8.25H7A2.75 2.75 0 004.25 11v1h1.5v-1c0-.69.56-1.25 1.25-1.25h4c.69 0 1.25.56 1.25 1.25v1h1.5zM4 20h9v-1.5H4V20zm16-4H4v-1.5h16V16z",fillRule:"evenodd",clipRule:"evenodd"})}),i=window.wp.element,s=(window.wp.i18n,(0,n.jsx)(t.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,n.jsx)(t.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})})),a=(0,n.jsx)(t.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,n.jsx)(t.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})}),r=window.wp.blockEditor,o=window.wp.components,c=JSON.parse('{"UU":"playground-step/update-user-meta","DD":"Update User Meta"}');(0,e.registerBlockType)(c.UU,{icon:l,edit:function({attributes:e,setAttributes:t,isSelected:x}){const{meta:d,userId:p}=e,[u,m]=(0,i.useState)(!1),[h,w]=(0,i.useState)(""),[j,_]=(0,i.useState)(""),[v,g]=(0,i.useState)(Object.entries(d)),[f,S]=(0,i.useState)(void 0);(0,i.useEffect)((()=>{t({meta:Object.fromEntries(v)})}),[v]);const C=(e,t,n)=>{const l=v.map((([l,i],s)=>s!==e?[l,i]:"key"===t?[n,i]:"value"===t?[l,n]:void 0));g(l)};return(0,n.jsxs)("div",{...(0,r.useBlockProps)(),children:[(0,n.jsx)(o.Placeholder,{preview:(0,n.jsxs)(o.__experimentalVStack,{style:{width:"100%"},children:[(0,n.jsxs)(o.__experimentalHStack,{justify:"left",align:"center",spacing:3,children:[(0,n.jsx)(o.Icon,{icon:l,size:28,className:"step-icon"}),(0,n.jsxs)(o.__experimentalVStack,{spacing:1,children:[(0,n.jsx)(o.__experimentalText,{upperCase:!0,size:12,weight:500,color:"#949494",children:c.DD}),!x&&(0,n.jsxs)(o.__experimentalVStack,{children:[(0,n.jsx)(o.__experimentalText,{weight:600,children:d?(0,n.jsx)("pre",{children:JSON.stringify(d,null," ")}):(0,n.jsx)("span",{children:"{config user meta}"})}),(0,n.jsx)(o.__experimentalText,{weight:600,children:p?`for UserId ${p}`:"{user Id}"})]})]})]}),x&&(0,n.jsxs)(o.__experimentalVStack,{children:[(0,n.jsxs)(o.__experimentalHStack,{justify:"left",alignment:"bottom",children:[(0,n.jsx)(o.__experimentalInputControl,{label:"Name",value:h,onChange:e=>{w(e)}}),(0,n.jsx)(o.__experimentalInputControl,{label:"Value",value:j,onChange:e=>_(e)}),(0,n.jsx)(o.Button,{icon:s,label:"Add Config",onClick:()=>{g([...v,[h,j]]),w(""),_("")}})]}),d&&v.map((([e,t],l)=>(0,n.jsxs)(o.__experimentalHStack,{justify:"left",alignment:"bottom",children:[(0,n.jsx)(o.__experimentalInputControl,{label:"Name",value:e,onChange:e=>C(l,"key",e)}),(0,n.jsx)(o.__experimentalInputControl,{label:"Value",value:t,onChange:e=>C(l,"value",e)}),(0,n.jsx)(o.Button,{isDestructive:!0,icon:a,label:"Delete Config",onClick:()=>{S(l),m(!0)}})]},l))),(0,n.jsx)(o.__experimentalHStack,{justify:"left",children:(0,n.jsx)(o.__experimentalInputControl,{label:"User Id",value:p,onChange:e=>t({userId:Number(e)})})})]})]})}),(0,n.jsx)(o.__experimentalConfirmDialog,{isOpen:u,onConfirm:()=>{g(v.filter(((e,t)=>t!==f))),S(void 0),m(!1)},onCancel:()=>m(!1),children:"Delete User Meta?"})]})}})})();
(()=>{"use strict";const e=window.wp.blocks,t=window.wp.primitives,i=window.ReactJSXRuntime,n=(0,i.jsx)(t.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,i.jsx)(t.Path,{d:"M10.5 4v4h3V4H15v4h1.5a1 1 0 011 1v4l-3 4v2a1 1 0 01-1 1h-3a1 1 0 01-1-1v-2l-3-4V9a1 1 0 011-1H9V4h1.5zm.5 12.5v2h2v-2l3-4v-3H8v3l3 4z"})}),l=window.wp.i18n,s=window.wp.blockEditor,r=window.wp.components,a=JSON.parse('{"UU":"playground-step/install-plugin","DD":"Install Plugin"}'),o=window.wp.htmlEntities,c=window.wp.element,d=(0,i.jsx)(t.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,i.jsx)(t.Path,{d:"M13 5c-3.3 0-6 2.7-6 6 0 1.4.5 2.7 1.3 3.7l-3.8 3.8 1.1 1.1 3.8-3.8c1 .8 2.3 1.3 3.7 1.3 3.3 0 6-2.7 6-6S16.3 5 13 5zm0 10.5c-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5 4.5 2 4.5 4.5-2 4.5-4.5 4.5z"})}),p=({item:e,onSelect:t})=>(0,i.jsx)(r.Card,{size:"small",children:(0,i.jsxs)(r.CardBody,{style:{padding:"0"},children:[(0,i.jsx)(r.CardMedia,{children:(0,i.jsx)("img",{src:e.screenshot_url})}),(0,i.jsx)(r.CardBody,{children:(0,i.jsxs)(r.__experimentalHStack,{align:"center",children:[(0,i.jsx)(r.__experimentalHeading,{level:5,children:e.name}),(0,i.jsx)(r.Button,{variant:"secondary",style:{borderRadius:"4px"},onClick:()=>t(e.slug),children:(0,l.__)("Select","picker")})]})})]})},e.slug),h=({item:e,onSelect:t})=>{return(0,i.jsx)(r.Card,{size:"small",children:(0,i.jsx)(r.CardBody,{style:{height:"100%"},children:(0,i.jsxs)(r.__experimentalVStack,{justify:"space-between",spacing:4,style:{height:"100%"},children:[(0,i.jsxs)(r.__experimentalVStack,{spacing:4,children:[(0,i.jsxs)(r.__experimentalHStack,{justify:"start",spacing:4,children:[(0,i.jsx)("img",{src:e.icons["1x"]||e.icons.default,alt:`${e.name} Icon`,style:{minWidth:"70px",maxHeight:"70px",objectFit:"contain",borderRadius:"4px"}}),(0,i.jsx)(r.ExternalLink,{href:e.homepage,style:{fontWeight:"bold",color:"#0073aa"},children:(0,o.decodeEntities)(e.name)})]}),(0,i.jsx)(r.__experimentalText,{lineHeight:"1.5em",children:e.short_description||(0,l.__)("No description available","picker")}),(0,i.jsxs)(r.__experimentalHStack,{spacing:10,children:[(0,i.jsx)(r.__experimentalText,{color:"#666",children:e.active_installs?`${n=e.active_installs,n>=1e6?n/1e6+"M":n>=1e3?n/1e3+"K":new Intl.NumberFormat("en-IN").format(n)}+ active installations`:(0,l.__)("No data available","picker")}),(0,i.jsxs)(r.__experimentalText,{color:"#666",children:[(0,l.__)("Tested with","picker")," ",e.tested||(0,l.__)("Unknown","picker")]})]})]}),(0,i.jsx)(r.__experimentalHStack,{justify:"right",children:(0,i.jsx)(r.Button,{variant:"secondary",style:{borderRadius:"4px"},onClick:()=>t(e.slug),children:(0,l.__)("Select","picker")})})]})})},e.slug);var n},u=function({type:e,onSelect:t}){const[n,s]=(0,c.useState)(!1),[a,o]=(0,c.useState)(""),[u,x]=(0,c.useState)([]),[g,m]=(0,c.useState)([]),[_,j]=(0,c.useState)(!1),f=async(t="")=>{j(!0);const i=!!t.trim(),n=`https://api.wordpress.org/${e}/info/1.2/?action=query_${e}${i?`&request[search]=${t}`:"&request[popular]=1"}`;try{const t=await fetch(n),l=await t.json();i?x(l[e]||[]):m(l[e]||[])}catch(t){console.error(`Error fetching ${e}:`,t)}finally{j(!1)}};(0,c.useEffect)((()=>{n&&!a&&f()}),[n,a]);const v=e=>{t(e),s(!1)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.Button,{variant:"secondary",onClick:()=>s(!0),style:{boxShadow:"none"},children:(0,l.__)("Browse","picker")}),n&&(0,i.jsx)(r.Modal,{title:(0,l.__)(`Browse ${e[0].toUpperCase()}${e.slice(1)}`,"picker"),onRequestClose:()=>s(!1),shouldCloseOnClickOutside:!1,size:"large",style:{height:"70%"},children:(0,i.jsxs)(r.__experimentalVStack,{spacing:6,justify:"space-between",children:[(0,i.jsx)(r.__experimentalInputControl,{__next40pxDefaultSize:!0,placeholder:(0,l.__)("Search by name or author","picker"),value:a,onChange:e=>{o(e),f(e)},suffix:(0,i.jsx)(r.Button,{variant:"link",onClick:()=>f(a),disabled:_,style:{textDecoration:"none",color:"#0073aa"},icon:d})}),(0,i.jsx)(r.__experimentalVStack,{children:_?(0,i.jsx)(r.__experimentalGrid,{columns:2,gap:5,children:Array.from({length:4}).map(((t,n)=>"themes"===e?(0,i.jsx)(y,{},n):(0,i.jsx)(w,{},n)))}):(0,i.jsx)(r.__experimentalGrid,{columns:2,gap:5,children:(a?u:g).map((t=>"themes"===e?(0,i.jsx)(p,{item:t,onSelect:v},t.slug):(0,i.jsx)(h,{item:t,onSelect:v},t.slug)))})})]})})]})},x=window.React,g=x.createContext({}),m=!0;function _({baseColor:e,highlightColor:t,width:i,height:n,borderRadius:l,circle:s,direction:r,duration:a,enableAnimation:o=m,customHighlightBackground:c}){const d={};return"rtl"===r&&(d["--animation-direction"]="reverse"),"number"==typeof a&&(d["--animation-duration"]=`${a}s`),o||(d["--pseudo-element-display"]="none"),"string"!=typeof i&&"number"!=typeof i||(d.width=i),"string"!=typeof n&&"number"!=typeof n||(d.height=n),"string"!=typeof l&&"number"!=typeof l||(d.borderRadius=l),s&&(d.borderRadius="50%"),void 0!==e&&(d["--base-color"]=e),void 0!==t&&(d["--highlight-color"]=t),"string"==typeof c&&(d["--custom-highlight-background"]=c),d}function j({count:e=1,wrapper:t,className:i,containerClassName:n,containerTestId:l,circle:s=!1,style:r,...a}){var o,c,d;const p=x.useContext(g),h={...a};for(const[e,t]of Object.entries(a))void 0===t&&delete h[e];const u={...p,...h,circle:s},j={...r,..._(u)};let w="react-loading-skeleton";i&&(w+=` ${i}`);const y=null!==(o=u.inline)&&void 0!==o&&o,f=[],v=Math.ceil(e);for(let t=0;t<v;t++){let i=j;if(v>e&&t===v-1){const t=null!==(c=i.width)&&void 0!==c?c:"100%",n=e%1,l="number"==typeof t?t*n:`calc(${t} * ${n})`;i={...i,width:l}}const n=x.createElement("span",{className:w,style:i,key:t},"â€Œ");y?f.push(n):f.push(x.createElement(x.Fragment,{key:t},n,x.createElement("br",null)))}return x.createElement("span",{className:n,"data-testid":l,"aria-live":"polite","aria-busy":null!==(d=u.enableAnimation)&&void 0!==d?d:m},t?f.map(((e,i)=>x.createElement(t,{key:i},e))):f)}const w=function(){return(0,i.jsx)(r.Card,{size:"small",children:(0,i.jsx)(r.CardBody,{children:(0,i.jsxs)(r.__experimentalVStack,{justify:"space-between",spacing:4,style:{height:"100%"},children:[(0,i.jsxs)(r.__experimentalHStack,{expanded:!0,spacing:8,children:[(0,i.jsx)(j,{width:70,height:70,style:{borderRadius:"4px"}}),(0,i.jsx)(r.__experimentalVStack,{style:{width:"100%"},children:(0,i.jsx)(j,{height:20,width:"60%"})})]}),(0,i.jsx)(j,{height:16,width:"90%"}),(0,i.jsxs)(r.__experimentalHStack,{justify:"space-between",children:[(0,i.jsx)(j,{containerClassName:"custom-skeleton",height:10,width:"80%"}),(0,i.jsx)(j,{containerClassName:"custom-skeleton",height:10,width:"100%"})]}),(0,i.jsx)(r.__experimentalHStack,{justify:"right",children:(0,i.jsx)(j,{width:80,height:32,style:{borderRadius:"4px"}})})]})})})},y=function(){return(0,i.jsx)(r.Card,{style:{borderRadius:"4px"},children:(0,i.jsxs)(r.CardBody,{style:{padding:0,lineHeight:"0px"},children:[(0,i.jsx)(j,{width:"100%",height:200,style:{borderRadius:"0px"}}),(0,i.jsxs)(r.__experimentalHStack,{spacing:2,align:"center",justify:"space-between",style:{padding:"12px"},children:[(0,i.jsx)(j,{height:16,width:180}),(0,i.jsx)(j,{width:80,height:32})]})]})})};(0,e.registerBlockType)(a.UU,{icon:n,edit:function({attributes:e,setAttributes:t,isSelected:o}){const{pluginZipFile:c,options:d}=e,{resource:p,path:h,url:x,slug:g}=c,{activate:m}=d,_=(e,i)=>{t({pluginZipFile:{...c,[e]:i}})};return(0,i.jsx)("div",{...(0,s.useBlockProps)(),children:(0,i.jsx)(r.Placeholder,{preview:(0,i.jsxs)(r.__experimentalVStack,{style:{width:"100%"},children:[(0,i.jsxs)(r.__experimentalHStack,{justify:"left",align:"center",spacing:3,children:[(0,i.jsx)(r.Icon,{icon:n,size:28,className:"step-icon"}),(0,i.jsxs)(r.__experimentalVStack,{spacing:1,children:[(0,i.jsx)(r.__experimentalText,{upperCase:!0,size:12,weight:500,color:"#949494",children:a.DD}),!o&&(0,i.jsx)(r.__experimentalText,{weight:600,children:`${p} > ${(e=>{switch(e){case"url":return x;case"vfs":return h;default:return g}})(p)} > ${m?"Activate":"Install and keep Inactive"}`})]})]}),o&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r.__experimentalToggleGroupControl,{label:"Resource",value:p,isBlock:!0,onChange:e=>{let i={resource:e};"vfs"===e?i.path=c.path||"":"url"===e?i.url=c.url||"":"wordpress.org/plugins"===e&&(i.slug=c.slug||""),t({pluginZipFile:i})},children:[(0,i.jsx)(r.__experimentalToggleGroupControlOption,{value:"url",label:"URL"}),(0,i.jsx)(r.__experimentalToggleGroupControlOption,{value:"wordpress.org/plugins",label:"Plugin"}),(0,i.jsx)(r.__experimentalToggleGroupControlOption,{value:"vfs",label:"VFS"})]}),"vfs"===p&&(0,i.jsx)(r.TextControl,{label:(0,l.__)("Path","install-plugin"),value:h,placeholder:"Enter the file path for the plugin ZIP",onChange:e=>_("path",e)}),"url"===p&&(0,i.jsx)(r.TextControl,{label:(0,l.__)("Url","install-plugin"),value:x,placeholder:"Enter the URL of the plugin ZIP file",onChange:e=>_("url",e)}),"wordpress.org/plugins"===p&&(0,i.jsx)(r.__experimentalInputControl,{style:{width:"100%",paddingBottom:"8px"},label:(0,l.__)("Slug","install-plugin"),value:g,placeholder:"Enter plugin slug",onChange:e=>_("slug",e),suffix:(0,i.jsx)(u,{type:"plugins",onSelect:e=>_("slug",e)})}),(0,i.jsx)(r.ToggleControl,{label:"Activate",checked:m,onChange:()=>t({options:{activate:!m}})})]})]})})})}})})();
(()=>{"use strict";const e=window.wp.blocks,t=window.wp.primitives,i=window.ReactJSXRuntime,n=(0,i.jsx)(t.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,i.jsx)(t.Path,{d:"M4 20h8v-1.5H4V20zM18.9 3.5c-.6-.6-1.5-.6-2.1 0l-7.2 7.2c-.4-.1-.7 0-1.1.1-.5.2-1.5.7-1.9 2.2-.4 1.7-.8 2.2-1.1 2.7-.1.1-.2.3-.3.4l-.6 1.1H6c2 0 3.4-.4 4.7-1.4.8-.6 1.2-1.4 1.3-2.3 0-.3 0-.5-.1-.7L19 5.7c.5-.6.5-1.6-.1-2.2zM9.7 14.7c-.7.5-1.5.8-2.4 1 .2-.5.5-1.2.8-2.3.2-.6.4-1 .8-1.1.5-.1 1 .1 1.3.3.2.2.3.5.2.8 0 .3-.1.9-.7 1.3z"})}),s=JSON.parse('{"UU":"playground-step/install-theme","DD":"Install Theme"}'),l=window.wp.i18n,r=window.wp.blockEditor,a=window.wp.components,o=window.wp.htmlEntities,c=window.wp.element,h=(0,i.jsx)(t.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,i.jsx)(t.Path,{d:"M13 5c-3.3 0-6 2.7-6 6 0 1.4.5 2.7 1.3 3.7l-3.8 3.8 1.1 1.1 3.8-3.8c1 .8 2.3 1.3 3.7 1.3 3.3 0 6-2.7 6-6S16.3 5 13 5zm0 10.5c-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5 4.5 2 4.5 4.5-2 4.5-4.5 4.5z"})}),d=({item:e,onSelect:t})=>(0,i.jsx)(a.Card,{size:"small",children:(0,i.jsxs)(a.CardBody,{style:{padding:"0"},children:[(0,i.jsx)(a.CardMedia,{children:(0,i.jsx)("img",{src:e.screenshot_url})}),(0,i.jsx)(a.CardBody,{children:(0,i.jsxs)(a.__experimentalHStack,{align:"center",children:[(0,i.jsx)(a.__experimentalHeading,{level:5,children:e.name}),(0,i.jsx)(a.Button,{variant:"secondary",style:{borderRadius:"4px"},onClick:()=>t(e.slug),children:(0,l.__)("Select","picker")})]})})]})},e.slug),p=({item:e,onSelect:t})=>{return(0,i.jsx)(a.Card,{size:"small",children:(0,i.jsx)(a.CardBody,{style:{height:"100%"},children:(0,i.jsxs)(a.__experimentalVStack,{justify:"space-between",spacing:4,style:{height:"100%"},children:[(0,i.jsxs)(a.__experimentalVStack,{spacing:4,children:[(0,i.jsxs)(a.__experimentalHStack,{justify:"start",spacing:4,children:[(0,i.jsx)("img",{src:e.icons["1x"]||e.icons.default,alt:`${e.name} Icon`,style:{minWidth:"70px",maxHeight:"70px",objectFit:"contain",borderRadius:"4px"}}),(0,i.jsx)(a.ExternalLink,{href:e.homepage,style:{fontWeight:"bold",color:"#0073aa"},children:(0,o.decodeEntities)(e.name)})]}),(0,i.jsx)(a.__experimentalText,{lineHeight:"1.5em",children:e.short_description||(0,l.__)("No description available","picker")}),(0,i.jsxs)(a.__experimentalHStack,{spacing:10,children:[(0,i.jsx)(a.__experimentalText,{color:"#666",children:e.active_installs?`${n=e.active_installs,n>=1e6?n/1e6+"M":n>=1e3?n/1e3+"K":new Intl.NumberFormat("en-IN").format(n)}+ active installations`:(0,l.__)("No data available","picker")}),(0,i.jsxs)(a.__experimentalText,{color:"#666",children:[(0,l.__)("Tested with","picker")," ",e.tested||(0,l.__)("Unknown","picker")]})]})]}),(0,i.jsx)(a.__experimentalHStack,{justify:"right",children:(0,i.jsx)(a.Button,{variant:"secondary",style:{borderRadius:"4px"},onClick:()=>t(e.slug),children:(0,l.__)("Select","picker")})})]})})},e.slug);var n},x=function({type:e,onSelect:t}){const[n,s]=(0,c.useState)(!1),[r,o]=(0,c.useState)(""),[x,u]=(0,c.useState)([]),[m,g]=(0,c.useState)([]),[_,j]=(0,c.useState)(!1),f=async(t="")=>{j(!0);const i=!!t.trim(),n=`https://api.wordpress.org/${e}/info/1.2/?action=query_${e}${i?`&request[search]=${t}`:"&request[popular]=1"}`;try{const t=await fetch(n),s=await t.json();i?u(s[e]||[]):g(s[e]||[])}catch(t){console.error(`Error fetching ${e}:`,t)}finally{j(!1)}};(0,c.useEffect)((()=>{n&&!r&&f()}),[n,r]);const k=e=>{t(e),s(!1)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.Button,{variant:"secondary",onClick:()=>s(!0),style:{boxShadow:"none"},children:(0,l.__)("Browse","picker")}),n&&(0,i.jsx)(a.Modal,{title:(0,l.__)(`Browse ${e[0].toUpperCase()}${e.slice(1)}`,"picker"),onRequestClose:()=>s(!1),shouldCloseOnClickOutside:!1,size:"large",style:{height:"70%"},children:(0,i.jsxs)(a.__experimentalVStack,{spacing:6,justify:"space-between",children:[(0,i.jsx)(a.__experimentalInputControl,{__next40pxDefaultSize:!0,placeholder:(0,l.__)("Search by name or author","picker"),value:r,onChange:e=>{o(e),f(e)},suffix:(0,i.jsx)(a.Button,{variant:"link",onClick:()=>f(r),disabled:_,style:{textDecoration:"none",color:"#0073aa"},icon:h})}),(0,i.jsx)(a.__experimentalVStack,{children:_?(0,i.jsx)(a.__experimentalGrid,{columns:2,gap:5,children:Array.from({length:4}).map(((t,n)=>"themes"===e?(0,i.jsx)(y,{},n):(0,i.jsx)(w,{},n)))}):(0,i.jsx)(a.__experimentalGrid,{columns:2,gap:5,children:(r?x:m).map((t=>"themes"===e?(0,i.jsx)(d,{item:t,onSelect:k},t.slug):(0,i.jsx)(p,{item:t,onSelect:k},t.slug)))})})]})})]})},u=window.React,m=u.createContext({}),g=!0;function _({baseColor:e,highlightColor:t,width:i,height:n,borderRadius:s,circle:l,direction:r,duration:a,enableAnimation:o=g,customHighlightBackground:c}){const h={};return"rtl"===r&&(h["--animation-direction"]="reverse"),"number"==typeof a&&(h["--animation-duration"]=`${a}s`),o||(h["--pseudo-element-display"]="none"),"string"!=typeof i&&"number"!=typeof i||(h.width=i),"string"!=typeof n&&"number"!=typeof n||(h.height=n),"string"!=typeof s&&"number"!=typeof s||(h.borderRadius=s),l&&(h.borderRadius="50%"),void 0!==e&&(h["--base-color"]=e),void 0!==t&&(h["--highlight-color"]=t),"string"==typeof c&&(h["--custom-highlight-background"]=c),h}function j({count:e=1,wrapper:t,className:i,containerClassName:n,containerTestId:s,circle:l=!1,style:r,...a}){var o,c,h;const d=u.useContext(m),p={...a};for(const[e,t]of Object.entries(a))void 0===t&&delete p[e];const x={...d,...p,circle:l},j={...r,..._(x)};let w="react-loading-skeleton";i&&(w+=` ${i}`);const y=null!==(o=x.inline)&&void 0!==o&&o,f=[],k=Math.ceil(e);for(let t=0;t<k;t++){let i=j;if(k>e&&t===k-1){const t=null!==(c=i.width)&&void 0!==c?c:"100%",n=e%1,s="number"==typeof t?t*n:`calc(${t} * ${n})`;i={...i,width:s}}const n=u.createElement("span",{className:w,style:i,key:t},"â€Œ");y?f.push(n):f.push(u.createElement(u.Fragment,{key:t},n,u.createElement("br",null)))}return u.createElement("span",{className:n,"data-testid":s,"aria-live":"polite","aria-busy":null!==(h=x.enableAnimation)&&void 0!==h?h:g},t?f.map(((e,i)=>u.createElement(t,{key:i},e))):f)}const w=function(){return(0,i.jsx)(a.Card,{size:"small",children:(0,i.jsx)(a.CardBody,{children:(0,i.jsxs)(a.__experimentalVStack,{justify:"space-between",spacing:4,style:{height:"100%"},children:[(0,i.jsxs)(a.__experimentalHStack,{expanded:!0,spacing:8,children:[(0,i.jsx)(j,{width:70,height:70,style:{borderRadius:"4px"}}),(0,i.jsx)(a.__experimentalVStack,{style:{width:"100%"},children:(0,i.jsx)(j,{height:20,width:"60%"})})]}),(0,i.jsx)(j,{height:16,width:"90%"}),(0,i.jsxs)(a.__experimentalHStack,{justify:"space-between",children:[(0,i.jsx)(j,{containerClassName:"custom-skeleton",height:10,width:"80%"}),(0,i.jsx)(j,{containerClassName:"custom-skeleton",height:10,width:"100%"})]}),(0,i.jsx)(a.__experimentalHStack,{justify:"right",children:(0,i.jsx)(j,{width:80,height:32,style:{borderRadius:"4px"}})})]})})})},y=function(){return(0,i.jsx)(a.Card,{style:{borderRadius:"4px"},children:(0,i.jsxs)(a.CardBody,{style:{padding:0,lineHeight:"0px"},children:[(0,i.jsx)(j,{width:"100%",height:200,style:{borderRadius:"0px"}}),(0,i.jsxs)(a.__experimentalHStack,{spacing:2,align:"center",justify:"space-between",style:{padding:"12px"},children:[(0,i.jsx)(j,{height:16,width:180}),(0,i.jsx)(j,{width:80,height:32})]})]})})};(0,e.registerBlockType)(s.UU,{icon:n,edit:function({attributes:e,setAttributes:t,isSelected:o}){const{themeZipFile:c,options:h}=e,{resource:d,path:p,url:u,slug:m}=c,{activate:g,importStarterContent:_}=h,j=(e,i)=>{t({themeZipFile:{...c,[e]:i}})};return(0,i.jsx)("div",{...(0,r.useBlockProps)(),children:(0,i.jsx)(a.Placeholder,{preview:(0,i.jsxs)(a.__experimentalVStack,{style:{width:"100%"},children:[(0,i.jsxs)(a.__experimentalHStack,{justify:"left",align:"center",spacing:3,children:[(0,i.jsx)(a.Icon,{icon:n,size:28,className:"step-icon"}),(0,i.jsxs)(a.__experimentalVStack,{spacing:1,children:[(0,i.jsx)(a.__experimentalText,{upperCase:!0,size:12,weight:500,color:"#949494",children:s.DD}),!o&&(0,i.jsx)(a.__experimentalText,{weight:600,children:`${d} > ${(e=>{switch(e){case"url":return u;case"vfs":return p;default:return m}})(d)||"undefined"} > ${g?"Activate":"Install and keep Inactive"} > ${_?"with":"without"} starter content`})]})]}),o&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(a.__experimentalToggleGroupControl,{label:"Resource",value:d,isBlock:!0,onChange:e=>{let i={resource:e};"vfs"===e?i.path=c.path||"":"url"===e?i.url=c.url||"":"wordpress.org/themes"===e&&(i.slug=c.slug||""),t({themeZipFile:i})},children:[(0,i.jsx)(a.__experimentalToggleGroupControlOption,{value:"url",label:"URL"}),(0,i.jsx)(a.__experimentalToggleGroupControlOption,{value:"wordpress.org/themes",label:"Theme"}),(0,i.jsx)(a.__experimentalToggleGroupControlOption,{value:"vfs",label:"VFS"})]}),"vfs"===d&&(0,i.jsx)(a.TextControl,{label:(0,l.__)("Path","install-theme"),value:p,placeholder:"Enter the file path for the theme ZIP",onChange:e=>j("path",e)}),"url"===d&&(0,i.jsx)(a.TextControl,{label:(0,l.__)("Url","install-theme"),value:u,placeholder:"Enter the URL of the theme ZIP file",onChange:e=>j("url",e)}),"wordpress.org/themes"===d&&(0,i.jsx)(a.__experimentalInputControl,{style:{width:"100%",paddingBottom:"8px"},label:(0,l.__)("Slug","install-theme"),value:m,placeholder:"Enter theme slug",onChange:e=>j("slug",e),suffix:(0,i.jsx)(x,{type:"themes",onSelect:e=>j("slug",e),text:"Picker"})}),(0,i.jsx)(a.ToggleControl,{label:"Activate",checked:g,onChange:()=>t({options:{...h,activate:!g}})}),(0,i.jsx)(a.ToggleControl,{label:"Import Starter Content",checked:_,onChange:()=>t({options:{...h,importStarterContent:!_}})})]})]})})})}})})();